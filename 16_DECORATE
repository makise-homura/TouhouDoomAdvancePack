/******************************************
  DECORATE ENTRY FOR SECOND EPISODE BOSSES
 ******************************************/
 
// NB. If you see something like "We should have an empty line here for some reason",
// then it means we really should. I don't know why, but without it following lines
// became skipped without any clear meaning, at least in Zandronum 3.0. Just bugs.

// Note: one frame in boss's death state is designed to separate call of 
// BHI_BossStopAttack from BHI_BossStartAttack of next spell/nonspell. Otherwise
// they may conflict. It is not required after last spell, of course.

/**** YOUMU ****/

ACTOR YoumuHB : Youmu replaces Youmu
{
	Tag "Youmu Konpaku"
	States
	{
		See:
			YOUM F 0 ACS_NamedExecute("BHI_BossStartAttack",0,13,ACS_NamedExecuteWithResult("BHI_SpellCardsBySkillLevel",1100),false)
			goto Super::See
		Death:
			YOUM F 0 ACS_NamedTerminate("BHI_BossStartAttack",0)
			YOUM F 0 ACS_NamedExecute("BHI_BossStopAttack",0)
			YOUM V 1
			goto Super::Death
	}
}
ACTOR YoumuHellRealmSwordHB : YoumuHellRealmSword replaces YoumuHellRealmSword
{
	Tag "Youmu Konpaku"
	States
	{
		See:
			YOUM F 0 Thing_ChangeTID(0,6004)
			YOUM F 0 ACS_NamedExecute("BHI_BossStartAttack",0,6004,0,true)
			goto Super::See
		Death:
			YOUM F 0 ACS_NamedTerminate("BHI_BossStartAttack",0)
			YOUM F 0 ACS_NamedExecute("BHI_BossStopAttack",0)
			goto Super::Death
	}
}

/**** YUYUKO ****/

ACTOR YuyukoHB : Yuyuko replaces Yuyuko
{
	Tag "Yuyuko Saigyouji"
	States
	{
		See:
			YUYU F 0 ACS_NamedExecute("BHI_BossStartAttack",0,4,2,false)
			goto Super::See
		Death:
			YUYU F 0 ACS_NamedTerminate("BHI_BossStartAttack",0)
			YUYU F 0 ACS_NamedExecute("BHI_BossStopAttack",0)
			YUYU K 1
			goto Super::Death
	}
}
ACTOR YuyukoEnigmaOfTheUnderworldHB : YuyukoEnigmaOfTheUnderworld replaces YuyukoEnigmaOfTheUnderworld
{
	Tag "Yuyuko Saigyouji"
	States
	{
		See:
			YUYU F 0 Thing_ChangeTID(0,6001)
			YUYU F 0 ACS_NamedExecute("BHI_BossStartAttack",0,6001,1,true)
			goto Super::See
		Death:
			YUYU F 0 ACS_NamedTerminate("BHI_BossStartAttack",0)
			YUYU F 0 ACS_NamedExecute("BHI_BossStopAttack",0)
			YUYU K 1
			goto Super::Death
	}
}
ACTOR YuyukoNS2HB : YuyukoNS2 replaces YuyukoNS2
{
	Tag "Yuyuko Saigyouji"
	States
	{
		See:
			YUYU F 0 Thing_ChangeTID(0,6002)
			YUYU F 0 ACS_NamedExecute("BHI_BossStartAttack",0,6002,1,false)
			goto Super::See
		Death:
			YUYU F 0 ACS_NamedTerminate("BHI_BossStartAttack",0)
			YUYU F 0 ACS_NamedExecute("BHI_BossStopAttack",0)
			YUYU K 1
			goto Super::Death
	}
}
ACTOR YuyukoAsTheButterflyFliesHB : YuyukoAsTheButterflyFlies replaces YuyukoAsTheButterflyFlies
{
	Tag "Yuyuko Saigyouji"
	States
	{
		See:
			YUYU F 0 Thing_ChangeTID(0,6003)
			YUYU F 0 ACS_NamedExecute("BHI_BossStartAttack",0,6003,0,true)
			goto Super::See
		Death:
			YUYU F 0 ACS_NamedTerminate("BHI_BossStartAttack",0)
			YUYU F 0 ACS_NamedExecute("BHI_BossStopAttack",0)
			goto Super::Death
	}
}

/**** KOMACHI MIDBOSS AND BOSS ****/

ACTOR KomachiHB : Komachi replaces Komachi
{
	Tag "Komachi Onozuka"
	States
	{
		See:
			// BossHealthIndicatorLoop will deal with midboss state later.
			KMCH F 0 ACS_NamedExecute("BHI_BossStartAttack",0,5,3,false)
			goto Super::See
		Death:
			KMCH F 0 ACS_NamedTerminate("BHI_BossStartAttack",0)
			KMCH F 0 ACS_NamedExecute("BHI_BossStopAttack",0)
			KMCH I 1
			goto Super::Death
	}
}
ACTOR KomachiAncientEarthboundSpiritsHB : KomachiAncientEarthboundSpirits replaces KomachiAncientEarthboundSpirits
{
	Tag "Komachi Onozuka"
	States
	{
		See:
			KMCH F 0 Thing_ChangeTID(0,6001)
			KMCH F 0 ACS_NamedExecute("BHI_BossStartAttack",0,6001,2,true)
			goto Super::See
		Death:
			KMCH F 0 ACS_NamedTerminate("BHI_BossStartAttack",0)
			KMCH F 0 ACS_NamedExecute("BHI_BossStopAttack",0)
			KMCH I 1
			goto Super::Death
	}
}
ACTOR KomachiNS2HB : KomachiNS2 replaces KomachiNS2
{
	Tag "Komachi Onozuka"
	States
	{
		See:
			KMCH F 0 Thing_ChangeTID(0,6002)
			KMCH F 0 ACS_NamedExecute("BHI_BossStartAttack",0,6002,2,false)
			goto Super::See
		Death:
			KMCH F 0 ACS_NamedTerminate("BHI_BossStartAttack",0)
			KMCH F 0 ACS_NamedExecute("BHI_BossStopAttack",0)
			KMCH I 1
			goto Super::Death
	}
}
ACTOR KomachiScytheOfFinalJudgementHB : KomachiScytheOfFinalJudgement replaces KomachiScytheOfFinalJudgement
{
	Tag "Komachi Onozuka"
	States
	{
		See:
			KMCH F 0 Thing_ChangeTID(0,6003)
			KMCH F 0 ACS_NamedExecute("BHI_BossStartAttack",0,6003,1,true)
			goto Super::See
		Death:
			KMCH F 0 ACS_NamedTerminate("BHI_BossStartAttack",0)
			KMCH F 0 ACS_NamedExecute("BHI_BossStopAttack",0)
			// This spell card does not drop bonus in original version. Well, we should fix it here.
			KMCH F 0 A_SpawnItem("LittleSpellCardBonus")
			KMCH I 1
			goto Super::Death
	}
}
ACTOR KomachiHiganRetourHB : KomachiHiganRetour replaces KomachiHiganRetour
{
	Tag "Komachi Onozuka"
	States
	{
		See:
			KMCH F 0 Thing_ChangeTID(0,6004)
			KMCH F 0 ACS_NamedExecute("BHI_BossStartAttack",0,6004,0,true)
			goto Super::See
		Death:
			KMCH F 0 ACS_NamedTerminate("BHI_BossStartAttack",0)
			KMCH F 0 ACS_NamedExecute("BHI_BossStopAttack",0)
			goto Super::Death
	}
}

/**** SUIKA MIDBOSS AND BOSS ****/

ACTOR SuikaHB : Suika replaces Suika
{
	Tag "Suika Ibuki"
	States
	{
		See:
			// BossHealthIndicatorLoop will deal with midboss state later.
			SUIK F 0 ACS_NamedExecute("BHI_BossStartAttack",0,7,3,false)
			goto Super::See
		Death:
			SUIK F 0 ACS_NamedTerminate("BHI_BossStartAttack",0)
			SUIK F 0 ACS_NamedExecute("BHI_BossStopAttack",0)
			SUI4 L 1
			goto Super::Death
	}
}
ACTOR SuikaMissingPowerHB : SuikaMissingPower replaces SuikaMissingPower
{
	Tag "Suika Ibuki"
	States
	{
		See:
			SUIK F 0 Thing_ChangeTID(0,6001)
			SUIK F 0 ACS_NamedExecute("BHI_BossStartAttack",0,6001,2,true)
			goto Super::See
		Death:
			SUIK F 0 ACS_NamedTerminate("BHI_BossStartAttack",0)
			SUIK F 0 ACS_NamedExecute("BHI_BossStopAttack",0)
			SUI4 L 1
			goto Super::Death
	}
}
ACTOR SuikaNS2HB : SuikaNS2 replaces SuikaNS2
{
	Tag "Suika Ibuki"
	States
	{
		See:
			SUIK F 0 Thing_ChangeTID(0,6002)
			SUIK F 0 ACS_NamedExecute("BHI_BossStartAttack",0,6002,2,false)
			goto Super::See
		Death:
			SUIK F 0 ACS_NamedTerminate("BHI_BossStartAttack",0)
			SUIK F 0 ACS_NamedExecute("BHI_BossStopAttack",0)
			SUI4 L 1
			goto Super::Death
	}
}
ACTOR SuikaDeepFogLabyrinthHB : SuikaDeepFogLabyrinth replaces SuikaDeepFogLabyrinth
{
	Tag "Suika Ibuki"
	States
	{
		See:
			SUIK F 0 Thing_ChangeTID(0,6003)
			SUIK F 0 ACS_NamedExecute("BHI_BossStartAttack",0,6003,1,true)
			goto Super::See
		Death:
			SUIK F 0 ACS_NamedTerminate("BHI_BossStartAttack",0)
			SUIK F 0 ACS_NamedExecute("BHI_BossStopAttack",0)
			SUI4 L 1
			goto Super::Death
	}
}
ACTOR SuikaNS3HB : SuikaNS3 replaces SuikaNS3
{
	Tag "Suika Ibuki"
	States
	{
		See:
			SUIK F 0 Thing_ChangeTID(0,6004)
			SUIK F 0 ACS_NamedExecute("BHI_BossStartAttack",0,6004,1,false)
			goto Super::See
		Death:
			SUIK F 0 ACS_NamedTerminate("BHI_BossStartAttack",0)
			SUIK F 0 ACS_NamedExecute("BHI_BossStopAttack",0)
			SUI4 L 1
			goto Super::Death
	}
}
ACTOR SuikaPandemoniumHB : SuikaPandemonium replaces SuikaPandemonium
{
	Tag "Suika Ibuki"
	States
	{
		See:
			SUIK F 0 Thing_ChangeTID(0,6005)
			SUIK F 0 ACS_NamedExecute("BHI_BossStartAttack",0,6005,0,true)
			goto Super::See
		Death:
			SUIK F 0 ACS_NamedTerminate("BHI_BossStartAttack",0)
			SUIK F 0 ACS_NamedExecute("BHI_BossStopAttack",0)
			goto Super::Death
	}
}

/**** SATORI ****/

ACTOR SatoriHB : Satori replaces Satori
{
	Tag "Satori Komeiji"
	States
	{
		See:
			SATR F 0 ACS_NamedExecute("BHI_BossStartAttack",0,24,4,false)
			goto Super::See
		Death:
			SATR F 0 ACS_NamedTerminate("BHI_BossStartAttack",0)
			SATR F 0 ACS_NamedExecute("BHI_BossStopAttack",0)
			SATR G 1
			goto Super::Death
	}
}
ACTOR SatoriTerrifyingHypnotismHB : SatoriTerrifyingHypnotism replaces SatoriTerrifyingHypnotism
{
	Tag "Satori Komeiji"
	States
	{
		See:
			SATR F 0 Thing_ChangeTID(0,6001)
			SATR F 0 ACS_NamedExecute("BHI_BossStartAttack",0,6001,3,true)
			goto Super::See
		Death:
			SATR F 0 ACS_NamedTerminate("BHI_BossStartAttack",0)
			SATR F 0 ACS_NamedExecute("BHI_BossStopAttack",0)
			SATR F 0 A_SpawnItem("LittleSpellCardBonus")
			SATR G 1
			goto Super::Death
	}
}
ACTOR SatoriNS2HB : SatoriNS2 replaces SatoriNS2
{
	Tag "Satori Komeiji"
	States
	{
		See:
			SATR F 0 Thing_ChangeTID(0,6002)
			SATR F 0 ACS_NamedExecute("BHI_BossStartAttack",0,6002,3,false)
			goto Super::See
		Death:
			SATR F 0 ACS_NamedTerminate("BHI_BossStartAttack",0)
			SATR F 0 ACS_NamedExecute("BHI_BossStopAttack",0)
			SATR G 1
			goto Super::Death
	}
}
ACTOR SatoriRainbowWindChimeHB : SatoriRainbowWindChime replaces SatoriRainbowWindChime
{
	Tag "Satori Komeiji"
	States
	{
		See:
			SATR F 0 Thing_ChangeTID(0,6003)
			SATR F 0 ACS_NamedExecute("BHI_BossStartAttack",0,6003,2,true)
			goto Super::See
		Death:
			SATR F 0 ACS_NamedTerminate("BHI_BossStartAttack",0)
			SATR F 0 ACS_NamedExecute("BHI_BossStopAttack",0)
			SATR F 0 A_SpawnItem("LittleSpellCardBonus")
			SATR G 1
			goto Super::Death
	}
}
ACTOR SatoriTheWorldHB : SatoriTheWorld replaces SatoriTheWorld
{
	Tag "Satori Komeiji"
	States
	{
		See:
			SATR F 0 Thing_ChangeTID(0,6004)
			SATR F 0 ACS_NamedExecute("BHI_BossStartAttack",0,6004,1,true)
			goto Super::See
		Death:
			SATR F 0 ACS_NamedTerminate("BHI_BossStartAttack",0)
			SATR F 0 ACS_NamedExecute("BHI_BossStopAttack",0)
			SATR F 0 A_SpawnItem("LittleSpellCardBonus")
			SATR G 1
			goto Super::Death
	}
}
ACTOR SatoriVampireIllusionHB : SatoriVampireIllusion replaces SatoriVampireIllusion
{
	Tag "Satori Komeiji"
	States
	{
		See:
			SATR F 0 Thing_ChangeTID(0,6005)
			SATR F 0 ACS_NamedExecute("BHI_BossStartAttack",0,6005,0,true)
			goto Super::See
		Death:
			SATR F 0 ACS_NamedTerminate("BHI_BossStartAttack",0)
			SATR F 0 ACS_NamedExecute("BHI_BossStopAttack",0)
			SATR F 0 A_SpawnItem("MediumSpellCardBonus")
			goto Super::Death
	}
}

/**** ORIN ****/

ACTOR OrinHB : Orin replaces Orin
{
	Tag "Rin Kaenbyou"
	States
	{
		See:
			ORIN F 0 ACS_NamedExecute("BHI_BossStartAttack",0,22,4,false)
			goto Super::See
		Death:
			ORIN F 0 ACS_NamedTerminate("BHI_BossStartAttack",0)
			ORIN F 0 ACS_NamedExecute("BHI_BossStopAttack",0)
			ORIN G 1
			goto Super::Death
	}
}
ACTOR OrinZombieFairyHB : OrinZombieFairy replaces OrinZombieFairy
{
	Tag "Rin Kaenbyou"
	States
	{
		See:
			ORIN F 0 Thing_ChangeTID(0,6001)
			ORIN F 0 ACS_NamedExecute("BHI_BossStartAttack",0,6001,3,true)
			goto Super::See
		Death:
			ORIN F 0 ACS_NamedTerminate("BHI_BossStartAttack",0)
			ORIN F 0 ACS_NamedExecute("BHI_BossStopAttack",0)
			ORIN F 0 A_SpawnItem("LittleSpellCardBonus")
			ORIN G 1
			goto Super::Death
	}
}
ACTOR OrinNS2HB : OrinNS2 replaces OrinNS2
{
	Tag "Rin Kaenbyou"
	States
	{
		See:
			ORIN F 0 Thing_ChangeTID(0,6002)
			ORIN F 0 ACS_NamedExecute("BHI_BossStartAttack",0,6002,3,false)
			goto Super::See
		Death:
			ORIN F 0 ACS_NamedTerminate("BHI_BossStartAttack",0)
			ORIN F 0 ACS_NamedExecute("BHI_BossStopAttack",0)
			ORIN G 1
			goto Super::Death
	}
}
ACTOR OrinBlazingWheelHB : OrinBlazingWheel replaces OrinBlazingWheel
{
	Tag "Rin Kaenbyou"
	States
	{
		See:
			ORIN F 0 Thing_ChangeTID(0,6003)
			ORIN F 0 ACS_NamedExecute("BHI_BossStartAttack",0,6003,2,true)
			goto Super::See
		Death:
			ORIN F 0 ACS_NamedTerminate("BHI_BossStartAttack",0)
			ORIN F 0 ACS_NamedExecute("BHI_BossStopAttack",0)
			ORIN F 0 A_SpawnItem("LittleSpellCardBonus")
			ORIN G 1
			goto Super::Death
	}
}
ACTOR OrinNS3HB : OrinNS3 replaces OrinNS3
{
	Tag "Rin Kaenbyou"
	States
	{
		See:
			ORIN F 0 Thing_ChangeTID(0,6004)
			ORIN F 0 ACS_NamedExecute("BHI_BossStartAttack",0,6004,2,false)
			goto Super::See
		Death:
			ORIN F 0 ACS_NamedTerminate("BHI_BossStartAttack",0)
			ORIN F 0 ACS_NamedExecute("BHI_BossStopAttack",0)
			ORIN G 1
			goto Super::Death
	}
}
ACTOR OrinAtonementHB : OrinAtonement replaces OrinAtonement
{
	Tag "Rin Kaenbyou"
	States
	{
		See:
			ORIN F 0 Thing_ChangeTID(0,6005)
			ORIN F 0 ACS_NamedExecute("BHI_BossStartAttack",0,6005,1,true)
			goto Super::See
		Death:
			ORIN F 0 ACS_NamedTerminate("BHI_BossStartAttack",0)
			ORIN F 0 ACS_NamedExecute("BHI_BossStopAttack",0)
			ORIN F 0 A_SpawnItem("LittleSpellCardBonus")
			ORIN G 1
			goto Super::Death
	}
}
ACTOR OrinSmallDemonsRevivalHB : OrinSmallDemonsRevival replaces OrinSmallDemonsRevival
{
	Tag "Rin Kaenbyou"
	States
	{
		See:
			ORIN F 0 Thing_ChangeTID(0,6006)
			ORIN F 0 ACS_NamedExecute("BHI_BossStartAttack",0,6006,0,true)
			goto Super::See
		Death:
			ORIN F 0 ACS_NamedTerminate("BHI_BossStartAttack",0)
			ORIN F 0 ACS_NamedExecute("BHI_BossStopAttack",0)
			ORIN F 0 A_SpawnItem("MediumSpellCardBonus")
			goto Super::Death
	}
}

/**** OKUU ****/

ACTOR UtsuhoHB : Utsuho replaces Utsuho
{
	Tag "Utsuho Reiuji"
	States
	{
		See:
			UNYU F 0 ACS_NamedExecute("BHI_BossStartAttack",0,13,5,false)
			goto Super::See
		Death:
			UNYU F 0 ACS_NamedTerminate("BHI_BossStartAttack",0)
			UNYU F 0 ACS_NamedExecute("BHI_BossStopAttack",0)
			UNYU N 1
			goto Super::Death
	}
}
ACTOR UtsuhoNuclearFusionHB : UtsuhoNuclearFusion replaces UtsuhoNuclearFusion
{
	Tag "Utsuho Reiuji"
	States
	{
		See:
			UNYU F 0 Thing_ChangeTID(0,6001)
			UNYU F 0 ACS_NamedExecute("BHI_BossStartAttack",0,6001,4,true)
			goto Super::See
		Death:
			UNYU F 0 ACS_NamedTerminate("BHI_BossStartAttack",0)
			UNYU F 0 ACS_NamedExecute("BHI_BossStopAttack",0)
			UNYU F 0 A_SpawnItem("LittleSpellCardBonus")
			UNYU N 1
			goto Super::Death
	}
}
ACTOR UtsuhoNS2HB : UtsuhoNS2 replaces UtsuhoNS2
{
	Tag "Utsuho Reiuji"
	States
	{
		See:
			UNYU F 0 Thing_ChangeTID(0,6002)
			UNYU F 0 ACS_NamedExecute("BHI_BossStartAttack",0,6002,4,false)
			goto Super::See
		Death:
			UNYU F 0 ACS_NamedTerminate("BHI_BossStartAttack",0)
			UNYU F 0 ACS_NamedExecute("BHI_BossStopAttack",0)
			UNYU N 1
			goto Super::Death
	}
}
ACTOR UtsuhoMegaFlareHB : UtsuhoMegaFlare replaces UtsuhoMegaFlare
{
	Tag "Utsuho Reiuji"
	States
	{
		See:
			UNYU F 0 Thing_ChangeTID(0,6003)
			UNYU F 0 ACS_NamedExecute("BHI_BossStartAttack",0,6003,3,true)
			goto Super::See
		Death:
			UNYU F 0 ACS_NamedTerminate("BHI_BossStartAttack",0)
			UNYU F 0 ACS_NamedExecute("BHI_BossStopAttack",0)
			UNYU F 0 A_SpawnItem("LittleSpellCardBonus")
			UNYU N 1
			goto Super::Death
	}
}
ACTOR UtsuhoNS3HB : UtsuhoNS3 replaces UtsuhoNS3
{
	Tag "Utsuho Reiuji"
	States
	{
		See:
			UNYU F 0 Thing_ChangeTID(0,6004)
			UNYU F 0 ACS_NamedExecute("BHI_BossStartAttack",0,6004,3,false)
			goto Super::See
		Death:
			UNYU F 0 ACS_NamedTerminate("BHI_BossStartAttack",0)
			UNYU F 0 ACS_NamedExecute("BHI_BossStopAttack",0)
			UNYU N 1
			goto Super::Death
	}
}
ACTOR UtsuhoFixedStarHB : UtsuhoFixedStar replaces UtsuhoFixedStar
{
	Tag "Utsuho Reiuji"
	States
	{
		See:
			UNYU F 0 ACS_NamedExecute("BHI_BossStartAttack",0,13,2,true)
			goto Super::See
		Death:
			UNYU F 0 ACS_NamedTerminate("BHI_BossStartAttack",0)
			UNYU F 0 ACS_NamedExecute("BHI_BossStopAttack",0)
			UNYU F 0 A_SpawnItem("LittleSpellCardBonus")
			UNYU N 1
			goto Super::Death
	}
}
ACTOR UtsuhoNS4HB : UtsuhoNS4 replaces UtsuhoNS4
{
	Tag "Utsuho Reiuji"
	States
	{
		See:
			UNYU F 0 Thing_ChangeTID(0,6005)
			UNYU F 0 ACS_NamedExecute("BHI_BossStartAttack",0,6005,2,false)
			goto Super::See
		Death:
			UNYU F 0 ACS_NamedTerminate("BHI_BossStartAttack",0)
			UNYU F 0 ACS_NamedExecute("BHI_BossStopAttack",0)
			UNYU N 1
			goto Super::Death
	}
}
ACTOR UtsuhoHeavenAndHellMeltdownHB : UtsuhoHeavenAndHellMeltdown replaces UtsuhoHeavenAndHellMeltdown
{
	Tag "Utsuho Reiuji"
	States
	{
		See:
			UNYU F 0 ACS_NamedExecute("BHI_BossStartAttack",0,13,1,true)
			goto Super::See
		Death:
			UNYU F 0 ACS_NamedTerminate("BHI_BossStartAttack",0)
			UNYU F 0 ACS_NamedExecute("BHI_BossStopAttack",0)
			UNYU F 0 A_SpawnItem("LittleSpellCardBonus")
			UNYU N 1
			goto Super::Death
	}
}
ACTOR UtsuhoSubterraneanSunHB : UtsuhoSubterraneanSun replaces UtsuhoSubterraneanSun
{
	Tag "Utsuho Reiuji"
	States
	{
		See:
			UNYU F 0 ACS_NamedExecute("BHI_BossStartAttack",0,13,0,true)
			goto Super::See
		Death:
			UNYU F 0 ACS_NamedTerminate("BHI_BossStartAttack",0)
			UNYU F 0 ACS_NamedExecute("BHI_BossStopAttack",0)
			UNYU F 0 A_SpawnItem("MediumSpellCardBonus")
			goto Super::Death
	}
}

/**** AYA ****/

ACTOR AyaSarutahikosGuidanceHB : AyaSarutahikosGuidance replaces AyaSarutahikosGuidance
{
	Tag "Aya Shameimaru"
	States
	{
		See:
			SHMI F 0 ACS_NamedExecute("BHI_BossStartAttack",0,15,2,true)
			goto Super::See
		Death:
			SHMI F 0 ACS_NamedTerminate("BHI_BossStartAttack",0)
			SHMI F 0 ACS_NamedExecute("BHI_BossStopAttack",0)
			SHMI F 0 A_SpawnItem("LittleSpellCardBonus")
			SHMI I 1
			goto Super::Death
	}
}
ACTOR AyaYoukaiKillingFanHB : AyaYoukaiKillingFan replaces AyaYoukaiKillingFan
{
	Tag "Aya Shameimaru"
	States
	{
		See:
			SHMI F 0 Thing_ChangeTID(0,6009)
			SHMI F 0 ACS_NamedExecute("BHI_BossStartAttack",0,6009,1,true)
			goto Super::See
		Death:
			SHMI F 0 ACS_NamedTerminate("BHI_BossStartAttack",0)
			SHMI F 0 ACS_NamedExecute("BHI_BossStopAttack",0)
			SHMI F 0 A_SpawnItem("LittleSpellCardBonus")
			SHMI I 1
			goto Super::Death
	}
}
ACTOR AyaToriiHurricaneHB : AyaToriiHurricane replaces AyaToriiHurricane
{
	Tag "Aya Shameimaru"
	States
	{
		See:
			SHMI F 0 Thing_ChangeTID(0,6010)
			SHMI F 0 ACS_NamedExecute("BHI_BossStartAttack",0,6010,0,true)
			goto Super::See
		Death:
			SHMI F 0 ACS_NamedTerminate("BHI_BossStartAttack",0)
			SHMI F 0 ACS_NamedExecute("BHI_BossStopAttack",0)
			SHMI F 0 A_SpawnItem("MediumSpellCardBonus")
			goto Super::Death
	}
}

/**** KOISHI ****/
// Koishi has THREE survival spells (and last one is not supposed to be survived at all).
// So we have to determine conditions when spells are about to begin.
// Candelabra spells begins immediately after Untitled Sign, so there's no problem,
// but to detect "Original map do not steal" one, we have to wait for script 54
// that opens this map; same is for skeletons, but a script 63. See TOUHOU2 ACS library.

ACTOR KoishiHB : Koishi replaces Koishi
{
	Tag "Koishi Komeiji"
	States
	{
		See:
			KOIS F 0 ACS_NamedExecute("BHI_BossStartAttack",0,21,10,false)
			KOIS F 0 A_GiveToTarget("GlobalStatExtra")
			goto Super::See
		Death:
			KOIS F 0 ACS_NamedTerminate("BHI_BossStartAttack",0)
			KOIS F 0 ACS_NamedExecute("BHI_BossStopAttack",0)
			KOIS O 1
			goto Super::Death
	}
}
ACTOR KoishiDanmakuParanoiaHB : KoishiDanmakuParanoia replaces KoishiDanmakuParanoia
{
	Tag "Koishi Komeiji"
	States
	{
		See:
			KOIS F 0 Thing_ChangeTID(0,6001)
			KOIS F 0 ACS_NamedExecute("BHI_BossStartAttack",0,6001,9,true)
			goto Super::See
		Death:
			KOIS F 0 ACS_NamedTerminate("BHI_BossStartAttack",0)
			KOIS F 0 ACS_NamedExecute("BHI_BossStopAttack",0)
			KOIS F 0 A_SpawnItem("MediumSpellCardBonus")
			KOIS O 1
			goto Super::Death
	}
}
ACTOR KoishiNS2HB : KoishiNS2 replaces KoishiNS2
{
	Tag "Koishi Komeiji"
	States
	{
		See:
			KOIS F 0 Thing_ChangeTID(0,6002)
			KOIS F 0 ACS_NamedExecute("BHI_BossStartAttack",0,6002,9,false)
			goto Super::See
		Death:
			KOIS F 0 ACS_NamedTerminate("BHI_BossStartAttack",0)
			KOIS F 0 ACS_NamedExecute("BHI_BossStopAttack",0)
			KOIS O 1
			goto Super::Death
	}
}
ACTOR KoishiReleaseOfTheIdSoftwareHB : KoishiReleaseOfTheIdSoftware replaces KoishiReleaseOfTheIdSoftware
{
	Tag "Koishi Komeiji"
	States
	{
		See:
			KOIS F 0 Thing_ChangeTID(0,6003)
			KOIS F 0 ACS_NamedExecute("BHI_BossStartAttack",0,6003,8,true)
			goto Super::See
		Death:
			KOIS F 0 ACS_NamedTerminate("BHI_BossStartAttack",0)
			KOIS F 0 ACS_NamedExecute("BHI_BossStopAttack",0)
			KOIS F 0 A_SpawnItem("MediumSpellCardBonus")
			KOIS O 1
			goto Super::Death
	}
}
ACTOR KoishiNS3HB : KoishiNS3 replaces KoishiNS3
{
	Tag "Koishi Komeiji"
	States
	{
		See:
			KOIS F 0 Thing_ChangeTID(0,6004)
			KOIS F 0 ACS_NamedExecute("BHI_BossStartAttack",0,6004,8,false)
			goto Super::See
		Death:
			KOIS F 0 ACS_NamedTerminate("BHI_BossStartAttack",0)
			KOIS F 0 ACS_NamedExecute("BHI_BossStopAttack",0)
			KOIS O 1
			goto Super::Death
	}
}
ACTOR KoishiEmbersOfLoveHB : KoishiEmbersOfLove replaces KoishiEmbersOfLove
{
	Tag "Koishi Komeiji"
	States
	{
		See:
			KOIS F 0 Thing_ChangeTID(0,6005)
			KOIS F 0 ACS_NamedExecute("BHI_BossStartAttack",0,6005,7,true)
			goto Super::See
		Death:
			KOIS F 0 ACS_NamedTerminate("BHI_BossStartAttack",0)
			KOIS F 0 ACS_NamedExecute("BHI_BossStopAttack",0)
			KOIS F 0 A_SpawnItem("MediumSpellCardBonus")
			KOIS O 1
			goto Super::Death
	}
}
ACTOR KoishiNS4HB : KoishiNS4 replaces KoishiNS4
{
	Tag "Koishi Komeiji"
	States
	{
		See:
			KOIS F 0 Thing_ChangeTID(0,6006)
			KOIS F 0 ACS_NamedExecute("BHI_BossStartAttack",0,6006,7,false)
			goto Super::See
		Death:
			KOIS F 0 ACS_NamedTerminate("BHI_BossStartAttack",0)
			KOIS F 0 ACS_NamedExecute("BHI_BossStopAttack",0)
			KOIS O 1
			goto Super::Death
	}
}
ACTOR KoishiGeneticsOfTheSubconsciousHB : KoishiGeneticsOfTheSubconscious replaces KoishiGeneticsOfTheSubconscious
{
	Tag "Koishi Komeiji"
	States
	{
		See:
			KOIS F 0 Thing_ChangeTID(0,6007)
			KOIS F 0 ACS_NamedExecute("BHI_BossStartAttack",0,6007,6,true)
			goto Super::See
		Death:
			KOIS F 0 ACS_NamedTerminate("BHI_BossStartAttack",0)
			KOIS F 0 ACS_NamedExecute("BHI_BossStopAttack",0)
			KOIS F 0 A_SpawnItem("BigSpellCardBonus")
			KOIS O 1
			goto Super::Death
	}
}
ACTOR KoishiDekwSignHB : KoishiDekwSign replaces KoishiDekwSign
{
	Tag "Koishi Komeiji"
	States
	{
		Spawn:
			TNT1 A 0 // We should have an empty line here for some reason		
			// As we are just out of survival attack, we have to terminate previous script
			// It shall be done here, not on 'See' state (as script 55 has a significant delay)
			KOIS F 0 ACS_NamedTerminate("BHI_BossStartSurvivalAttack",0)
			KOIS F 0 ACS_NamedExecute("BHI_BossStopAttack",0)
			goto Super::Spawn
		See:
			KOIS F 0 ACS_NamedExecute("BHI_BossStartAttack",0,26,4,true)
			goto Super::See
		Death:
			KOIS F 0 ACS_NamedTerminate("BHI_BossStartAttack",0)
			KOIS F 0 ACS_NamedExecute("BHI_BossStopAttack",0)
			KOIS O 1
			// We wouldn't spawn bonus here, because player get teleported out immediately
			goto Super::Death
	}
}
ACTOR KoishiYhollSignHB : KoishiYhollSign replaces KoishiYhollSign
{
	Tag "Koishi Komeiji"
	States
	{
		See:
			KOIS F 0 ACS_NamedExecute("BHI_BossStartAttack",0,22,3,true)
			goto Super::See
		Death:
			KOIS F 0 ACS_NamedTerminate("BHI_BossStartAttack",0)
			KOIS F 0 ACS_NamedExecute("BHI_BossStopAttack",0)
			KOIS F 0 A_SpawnItem("BigSpellCardBonus")
			KOIS O 1
			goto Super::Death
	}
}
ACTOR KoishiUntitledSignHB : KoishiUntitledSign replaces KoishiUntitledSign
{
	Tag "Koishi Komeiji"
	States
	{
		See:
			KOIS F 0 Thing_ChangeTID(0,6008)
			KOIS F 0 ACS_NamedExecute("BHI_BossStartAttack",0,6008,2,true)
			goto Super::See
		Death:
			KOIS F 0 ACS_NamedTerminate("BHI_BossStartAttack",0)
			KOIS F 0 ACS_NamedExecute("BHI_BossStopAttack",0)
			KOIS F 0 A_SpawnItem("BigSpellCardBonus")
			// Survival attack will be started after a delay
			KOIS F 0 ACS_NamedExecute("BHI_KoishiStartSurvival2",0)
			KOIS O 1
			goto Super::Death
	}
}
ACTOR KoishiPraiseBenellusHB : KoishiPraiseBenellus replaces KoishiPraiseBenellus
{
	Tag "Koishi Komeiji"
	States
	{
		See:
			// Survival attack will be stopped at end of script 59
			KOIS F 0 ACS_NamedExecute("BHI_BossStartAttack",0,32,0,true)
			goto Super::See
		Death:
			KOIS F 0 ACS_NamedTerminate("BHI_BossStartAttack",0)
			KOIS F 0 ACS_NamedExecute("BHI_BossStopAttack",0)
			KOIS FFFFFF 0 A_SpawnItem("BigSpellCardBonus") // Heh, capture this WHOLE BUNCH at last! 
			// Survival attack will be started after a delay
			KOIS F 0 ACS_NamedExecute("BHI_KoishiStartSurvival3",0)
			KOIS O 1 // We left it here, bacause it's not last spell card (skeletons follow!)
			goto Super::Death
	}
}